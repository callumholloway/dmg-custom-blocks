(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};React;const t=wp.blocks,a=wp.components,l=wp.element,n=wp.apiFetch;var r=e.n(n);const s=wp.url,c=JSON.parse('{"UU":"dmg/read-more"}'),o=wp.blockEditor;(0,t.registerBlockType)(c.UU,{edit({attributes:e,setAttributes:t}){const{postId:n,postTitle:c,postLink:p}=e,i=(0,o.useBlockProps)({style:{padding:"8px"}}),[d,m]=(0,l.useState)(""),[u,E]=(0,l.useState)([]),[R,g]=(0,l.useState)(1),[k,y]=(0,l.useState)(!1),[b,f]=(0,l.useState)(1);return(0,l.useEffect)((()=>{(async(e="",t=1)=>{y(!0);let a={per_page:10,status:"publish",page:t,_embed:!0};e&&(/^\d+$/.test(e)?a.include=[parseInt(e)]:a.search=e);try{const e=await r()({path:(0,s.addQueryArgs)("/wp/v2/posts",a),parse:!1}),t=await e.json(),l=parseInt(e.headers.get("X-WP-TotalPages")||"1",10);E(t),f(l)}catch(e){console.error("Error fetching posts",e),E([])}finally{y(!1)}})(d,R)}),[d,R]),React.createElement(React.Fragment,null,React.createElement(o.InspectorControls,null,React.createElement(a.PanelBody,{title:"Select a Post",initialOpen:!0},React.createElement(a.TextControl,{label:"Search Posts or Enter Post ID",value:d,onChange:e=>{m(e),g(1)}}),k?React.createElement(a.Spinner,null):React.createElement("div",null,u.length>0?u.map((e=>React.createElement(a.Button,{isPressed:e.id===n,key:e.id,onClick:()=>(e=>{t({postId:e.id,postTitle:e.title.rendered,postLink:e.link})})(e),style:{display:"block",marginBottom:"8px",textAlign:"left"}},e.title?.rendered||"Untitled Post"))):React.createElement("p",null,"No posts found."),b>1&&React.createElement("div",{style:{marginTop:"1em"}},React.createElement(a.Button,{disabled:1===R,onClick:()=>g(R-1)},"Previous"),React.createElement(a.Button,{disabled:R===b,onClick:()=>g(R+1),style:{marginLeft:"10px"}},"Next"))))),React.createElement("div",i,n?React.createElement("p",{className:"dmg-read-more"},"Read More: ",React.createElement("a",{href:p,className:"wp-element-link"},c)):React.createElement("p",null,"Select a post from the Inspector panel.")))},save({attributes:e}){const{postId:t,postTitle:a,postLink:l}=e;if(!t||!a||!l)return null;const n=o.useBlockProps.save({className:"dmg-read-more",style:{padding:"8px"}});return React.createElement("div",n,React.createElement("p",null,"Read More: ",React.createElement("a",{href:l,className:"wp-element-link"},a)))}})})();